
# æ¥šæ–‡å­—çŸ¥è¯†æ€§ç§‘æ™®ç½‘ç«™ (Chu Script Knowledge Popularization Platform)

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Framework-Flask-green)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

> ä¸€ä¸ªé›†å­¦æœ¯æ€§ä¸è¶£å‘³æ€§äºä¸€ä½“çš„ Web å¹³å°ï¼Œè‡´åŠ›äºé€šè¿‡æ•°å­—åŒ–æ‰‹æ®µæ™®åŠ**æ¥šç³»æ–‡å­—**ä¸**æ¥šåœ°è€ƒå¤æ–‡åŒ–**ã€‚ç³»ç»Ÿæ•´åˆäº†æ—¶ç©ºåœ°å›¾ã€æ–‡ç‰©å›¾é‰´ä¸äº¤äº’å¼æ–‡å­—ç ´è¯‘æ¸¸æˆï¼Œç”ŸåŠ¨å‘ˆç°ä»è¥¿å‘¨è‡³æˆ˜å›½æ—¶æœŸçš„æ¥šæ–‡æ˜é£è²Œã€‚

 [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) | [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹-æœ¬åœ°å¼€å‘) | [éƒ¨ç½²æŒ‡å—](#-ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ—¨åœ¨é™ä½å…¬ä¼—æ¥è§¦å¤æ–‡å­—çš„é—¨æ§›ã€‚é€šè¿‡ Leaflet äº¤äº’åœ°å›¾å±•ç¤ºæ¥šæ–‡åŒ–ç–†åŸŸå˜è¿ï¼Œç»“åˆâ€œå¤å­—ç ´è¯‘â€äº’åŠ¨æ¸¸æˆï¼Œè®©ç”¨æˆ·åœ¨å¨±ä¹ä¸­å­¦ä¹ æ¥šç³»ç®€å¸›æ–‡å­—ã€é¸Ÿè™«ä¹¦åŠå®˜å°æ–‡å­—çŸ¥è¯†ã€‚åå°é…å¤‡å®Œå–„çš„æ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå†…å®¹çš„å¯è§†åŒ–ç»´æŠ¤ã€‚

### âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **ğŸ—ºï¸ æ—¶ç©ºå¯è§†åŒ–åœ°å›¾**ï¼š
    *   åŠ¨æ€æ—¶é—´è½´ï¼šå±•ç¤ºæ¥šå›½ç–†åŸŸéšå¹´ä»£çš„å˜åŒ–ã€‚
    *   é—å€åˆ†å¸ƒï¼šç‚¹å‡»åœ°å›¾åæ ‡æŸ¥çœ‹ç›¸å…³å‡ºåœŸç®€ç‰ä¸æ–‡ç‰©è¯¦æƒ…ã€‚
*   **ğŸ® æ¥šéŸµÂ·æ–‡å­—æŒ‘æˆ˜**ï¼š
    *   æ¯æ—¥éšæœºé¢˜åº“ï¼šåŸºäº JSON/æ•°æ®åº“ çš„ 50+ é“é¢˜åº“ï¼Œæ¶µç›–å­—å½¢è¾¨æã€å†å²å…¸æ•…ä¸å™¨ç‰©çŸ¥è¯†ã€‚
    *   äº’åŠ¨åé¦ˆï¼šå³æ—¶åˆ¤æ–­æ­£è¯¯ï¼Œæä¾›è¯¦ç»†çš„å­¦æœ¯è§£æã€‚
*   **ğŸ›¡ï¸ ç»¼åˆç®¡ç†åå°**ï¼š
    *   å¯è§†åŒ–ä»ªè¡¨ç›˜ï¼šå®æ—¶ç»Ÿè®¡é¢˜åº“æ•°é‡ã€é—å€ç‚¹ä½ä¸è®¿é—®æ•°æ®ã€‚
    *   æ•°æ®ç®¡ç†ï¼šæ”¯æŒå¯¹é¢˜åº“ã€é—å€åæ ‡ã€ä¸­å¿ƒç‚¹é…ç½®çš„å¢åˆ æ”¹æŸ¥ (CRUD)ã€‚
    *   å®‰å…¨è®¤è¯ï¼šåŸºäº Flask-Login çš„ç®¡ç†å‘˜æƒé™æ§åˆ¶ã€‚
*   **âš™ï¸ åŒæ¨¡æ•°æ®æ¶æ„**ï¼š
    *   å¼€å‘å‹å¥½ï¼šæ”¯æŒç›´æ¥è¯»å– JSON æ–‡ä»¶ (`quiz_questions.json`, `sites.json`)ã€‚
    *   ç”Ÿäº§ç¨³å®šï¼šé€šè¿‡ `migrate.py` å·¥å…·ä¸€é”®å°† JSON åŒæ­¥è‡³ SQLite/PostgreSQL æ•°æ®åº“ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

*   **åç«¯æ ¸å¿ƒ**ï¼šPython Flask, SQLAlchemy (ORM)
*   **åå°ç®¡ç†**ï¼šFlask-Admin, Flask-Login
*   **å‰ç«¯äº¤äº’**ï¼šHTML5, CSS3 (è‡ªå®šä¹‰æ ·å¼), JavaScript (ES6+), Leaflet.js (åœ°å›¾)
*   **æ•°æ®å­˜å‚¨**ï¼šSQLite (æœ¬åœ°å¼€å‘) / PostgreSQL (ç”Ÿäº§ç¯å¢ƒ)
*   **æœåŠ¡å™¨**ï¼šNginx + Gunicorn

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (æœ¬åœ°å¼€å‘)

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/yourusername/chu-script-web.git
cd chu-script-web
```
### 2. ç¯å¢ƒé…ç½®
å»ºè®®ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒä»¥éš”ç¦»ä¾èµ–ï¼š

Windows:

```Bash
python -m venv venv
venv\Scripts\activate
```
Linux / macOS:

```Bash
python3 -m venv venv
source venv/bin/activate
```
å®‰è£…ä¾èµ–:

```Bash
pip install -r requirements.txt
```
### 3.é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶:

 Flask é…ç½®
````
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=dev-key-please-change-in-prod
````
æ•°æ®åº“é…ç½® (é»˜è®¤ä½¿ç”¨æœ¬åœ° SQLite)
````
DATABASE_URL=sqlite:///chu.db
````
åå°ç®¡ç†å‘˜é»˜è®¤å¯†ç 
````
ADMIN_PASSWORD=123456
````
### 4.æ•°æ®åˆå§‹åŒ–

æœ¬é¡¹ç›®åŒ…å«è‡ªåŠ¨è¿ç§»è„šæœ¬ï¼Œå¯å°†é™æ€ JSON æ•°æ®å¯¼å…¥æ•°æ®åº“ï¼š

1. åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
````
python migrate.py init
````
2. å¯¼å…¥é¢˜åº“å’Œé—å€æ•°æ® (è¯»å– static/quiz_questions.json ç­‰)
````
python migrate.py migrate
````
 3. (å¯é€‰) éªŒè¯æ•°æ®å®Œæ•´æ€§
````
python migrate.py validate
````
 4. å¯åŠ¨åº”ç”¨

```Bash
python app.py
å‰å°é¦–é¡µ: http://127.0.0.1:5000
ç®¡ç†åå°: http://127.0.0.1:5000/admin
```
# ğŸ”§ æ•°æ®ç»´æŠ¤æŒ‡å—
æ–¹å¼ä¸€ï¼šé€šè¿‡ç®¡ç†åå° (æ¨è)
ç™»å½• /admin åå°ï¼Œè¿›å…¥**â€œäº’åŠ¨æ¸¸æˆ-é¢˜åº“ç®¡ç†â€æˆ–â€œåœ°å›¾æ•°æ®-é—å€åˆ—è¡¨â€**ï¼Œå³å¯è¿›è¡Œå¯è§†åŒ–çš„æ·»åŠ å’Œä¿®æ”¹ã€‚ä¿®æ”¹å³æ—¶ç”Ÿæ•ˆã€‚

æ–¹å¼äºŒï¼šé€šè¿‡ JSON æ–‡ä»¶ (æ‰¹é‡æ›´æ–°)
ä¿®æ”¹ static/quiz_questions.json æˆ– sites.json æ–‡ä»¶ã€‚
è¿è¡Œè¿ç§»å‘½ä»¤æ›´æ–°æ•°æ®åº“ï¼š

```Bash
python migrate.py migrate
```
# ğŸ“¦ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. å‡†å¤‡ PostgreSQL æ•°æ®åº“

```Bash
# ç™»å½• Postgres
sudo -u postgres psql

# åˆ›å»ºåº“å’Œç”¨æˆ·
CREATE DATABASE chu_web_db;
CREATE USER chu_admin WITH PASSWORD 'strong_password';
GRANT ALL PRIVILEGES ON DATABASE chu_web_db TO chu_admin;
```
2. æ›´æ–°ç”Ÿäº§ç¯å¢ƒé…ç½® (.env)

```Ini
FLASK_ENV=production
DATABASE_URL=postgresql://chu_admin: strong_password@localhost/chu_web_db
SECRET_KEY=generate-a-random-strong-key-here
ADMIN_PASSWORD=complex_admin_password
```
3. é…ç½® Gunicorn ä¸ Systemd
åˆ›å»ºæœåŠ¡æ–‡ä»¶ /etc/systemd/system/chuweb.serviceï¼š

```Ini
[Unit]
Description=Chu Script Website Gunicorn Daemon
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/chu-script-web
Environment="PATH=/var/www/chu-script-web/venv/bin"
ExecStart=/var/www/chu-script-web/venv/bin/gunicorn --workers 3 --bind unix:chuweb.sock app:app

[Install]
WantedBy=multi-user.target
```
4. é…ç½® Nginx åå‘ä»£ç†

```Nginx
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        include proxy_params;
        proxy_pass http://unix:/var/www/chu-script-web/chuweb.sock;
    }

    location /static {
        alias /var/www/chu-script-web/static;
    }
}
```
# ğŸ¤ è´¡çŒ®ä¸åé¦ˆ
æ¬¢è¿å¯¹æ¥šæ–‡åŒ–æ„Ÿå…´è¶£çš„å¼€å‘è€…å‚ä¸è´¡çŒ®ï¼

Fork æœ¬ä»“åº“ã€‚
åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (git checkout -b feature/NewQuizType)ã€‚
æäº¤ä»£ç å¹¶æ¨é€ã€‚
å‘èµ· Pull Requestã€‚

# ğŸ“„ ç‰ˆæƒè¯´æ˜
æœ¬é¡¹ç›®å†…å®¹ï¼ˆæ–‡æœ¬ã€ä»£ç ï¼‰éµå¾ª MIT åè®®ã€‚
éƒ¨åˆ†æ–‡ç‰©å›¾ç‰‡æ¥æºäºå…¬å¼€ç½‘ç»œèµ„æ–™ï¼Œç‰ˆæƒå½’åŸåšç‰©é¦†æ‰€æœ‰ï¼Œä»…ä½œç§‘æ™®å±•ç¤ºç”¨é€”ã€‚